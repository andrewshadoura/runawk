--------------------------------------------------
------- args: -d _test_program
new_argv [0] = _test_program
new_argv [1] = -f
new_argv [3] = --
--------------------------------------------------
------- args: -d _test_program --long-option
new_argv [0] = _test_program
new_argv [1] = -f
new_argv [3] = --
new_argv [4] = --long-option
new_argv [5] = -
--------------------------------------------------
------- args: --debug _test_program -o=file
new_argv [0] = _test_program
new_argv [1] = -f
new_argv [3] = --
new_argv [4] = -o=file
new_argv [5] = -
--------------------------------------------------
------- args: -d --without-stdin _test_program -o=file
new_argv [0] = _test_program
new_argv [1] = -f
new_argv [3] = --
new_argv [4] = -o=file
--------------------------------------------------
------- args: --debug -I _test_program -o=file
new_argv [0] = _test_program
new_argv [1] = -f
new_argv [3] = --
new_argv [4] = -o=file
--------------------------------------------------
------- args: -d _test_program fn1 fn2
new_argv [0] = _test_program
new_argv [1] = -f
new_argv [3] = --
new_argv [4] = fn1
new_argv [5] = fn2
--------------------------------------------------
------- args: -di _test_program arg1 arg2
new_argv [0] = _test_program
new_argv [1] = -f
new_argv [3] = --
new_argv [4] = arg1
new_argv [5] = arg2
new_argv [6] = -
--------------------------------------------------
------- args: --debug --with-stdin _test_program arg1 arg2
new_argv [0] = _test_program
new_argv [1] = -f
new_argv [3] = --
new_argv [4] = arg1
new_argv [5] = arg2
new_argv [6] = -
--------------------------------------------------
------- args: -V
xxx
--------------------------------------------------
------- args: -h
runawk - wrapper for an AWK interpreter
--------------------------------------------------
------- args: -e BEGIN {print "Hello World"}
Hello World
--------------------------------------------------
------- args: -v one=1 -e BEGIN {print one} {print "unbelievably"} /dev/null
1
--------------------------------------------------
------- args: -v two=2 -e BEGIN {print two}
2
--------------------------------------------------
------- args: --execute BEGIN {print "Hello World"} /dev/null
Hello World
--------------------------------------------------
------- args: --assign var1=123 -v var2=321 -e BEGIN {print var1, var2}
123 321
--------------------------------------------------
------- args: _test.tmp
Hello World1.2
Hello World1.3
Hello World1.1
Hello World 2.2
Hello World 2.1
Hello World 2.3
--------------------------------------------------
------- args: _test.tmp
Cannot find module `module2.1.awk`, check AWKPATH environment variable
--------------------------------------------------
------- args: ROOT/mods3/failed1.awk
error: invalid directive at line #1,
 line=`#use `
 file=`ROOT/mods3/failed1.awk`
--------------------------------------------------
------- args: ROOT/mods3/failed2.awk
error: invalid directive at line #2,
 line=`#interp      "trtrtr`
 file=`ROOT/mods3/failed2.awk`
--------------------------------------------------
------- args: ROOT/mods3/failed3.awk
error: invalid directive at line #3,
 line=`#env 'LC_ALL=C'                   `
 file=`ROOT/mods3/failed3.awk`
--------------------------------------------------
------- args: ROOT/mods3/failed4.awk
running '/invalid/path' failed: No such file or directory
--------------------------------------------------
------- args: ROOT/mods3/test5.awk
1
0
1
0
env FOO=BAR
env TESTVAR=testval
--------------------------------------------------
------- args: -e 
#interp "/invalid/path"

BEGIN {print "Hello World!"}

running '/invalid/path' failed: No such file or directory
--------------------------------------------------
------- args: -e 
#use "/invalid/path/file.awk"

stat("/invalid/path/file.awk") failed: No such file or directory
--------------------------------------------------
------- args: -d -e 
#env "LC_ALL=C"
#env "FOO2=bar2"

BEGIN {
   ...
}

new_argv [0] = awk
new_argv [1] = 
#env "LC_ALL=C"
#env "FOO2=bar2"

BEGIN {
   ...
}

--------------------------------------------------
------- args: -e 
#env "LC_ALL=C"
#env "FOO2=bar2"

BEGIN {
   print ("y" ~ /^[a-z]$/)
   print ("Y" ~ /^[a-z]$/)
   print ("z" ~ /^[a-z]$/)
   print ("Z" ~ /^[a-z]$/)

   print ("env FOO2=" ENVIRON ["FOO2"])
}

1
0
1
0
env FOO2=bar2
--------------------------------------------------
------- args: -d -e 
#use "alt_assert.awk"

BEGIN {
   print "Hello world!"
   abort("just a test", 7)
}
 /dev/null
new_argv [0] = awk
new_argv [1] = -f
new_argv [2] = ROOT/../modules/exitnow.awk
new_argv [3] = -f
new_argv [4] = ROOT/../modules/abort.awk
new_argv [5] = -f
new_argv [6] = ROOT/../modules/alt_assert.awk
new_argv [7] = -f
new_argv [8] = /tmp/runawk.NNNNNN
new_argv [9] = --
new_argv [10] = /dev/null
--------------------------------------------------
------- args: -e 
#use "alt_assert.awk"

BEGIN {
   abort("just a test", 7)
}

error: just a test
       ARGV[0]=awk
       $0=``
       NF=0
       FNR=0
       FILENAME=
--------------------------------------------------
------- args: test_multisub
--------------------------------------------------
------- args: test_tokenre
--------------------------------------------------
------- args: test_getopt -h -
option `h'
ARGV [2] = -
--------------------------------------------------
------- args: test_getopt --help
option `h'
ARGV [2] = -
--------------------------------------------------
------- args: test_getopt -h --help -v --verbose -V -o 123 -o234
option `h'
option `h'
option `v'
option `v'
option `V'
option `o': 123
option `o': 234
--------------------------------------------------
------- args: test_getopt --output 123 --output 234 -n 999 -n9999 --len 5 --fake
option `o': 123
option `o': 234
option `n': 999
option `n': 9999
option `len': 5
option `fake'
--------------------------------------------------
------- args: test_getopt -- -1 -2 -3
ARGV [2] = -1
ARGV [3] = -2
ARGV [4] = -3
--------------------------------------------------
------- args: test_getopt --fake -v -- -1 -2 -3
option `fake'
option `v'
ARGV [4] = -1
ARGV [5] = -2
ARGV [6] = -3
